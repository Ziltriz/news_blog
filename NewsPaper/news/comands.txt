from news.models import *
user1 = User.objects.create(username="Zil")
user1.save()
user2 = User.objects.create(username="Triz")
user2.save()
author1 = Author.objects.create(user=user1, rating=0)
author1.save()
author2 = Author.objects.create(user=user2, rating=0)
author2.save()
category1 = Category.objects.create(name='Наука')
category1.save()
category2 = Category.objects.create(name='Литература')
category2.save()
category3 = Category.objects.create(name='Культура')
category3.save()
category4 = Category.objects.create(name='Политика')
category4.save()
post1 = Post.objects.create(author=author1, type='news')
post1.save()
post2 = Post.objects.create(author=author1, type='post')
post2.save()
post3 = Post.objects.create(author=author2, type='post')
post3.save()
post1.categories.add(category1)
post1.save()
post2.categories.add(category1, category2)
post2.save()
post3.categories.add(category3)
post3.save()
comment1 = Comment.objects.create(post=post1, user=user1)
comment1.save()
comment2 = Comment.objects.create(post=post2, user=user1)
comment2.save()
comment3 = Comment.objects.create(post=post3, user=user2)
comment3.save()
comment4 = Comment.objects.create(post=post2, user=user2)
comment4.save()
comment4.like()
comment4.save()
comment3.like()
comment3.save()
comment2.dislike()
comment2.save()
comment1.dislike()
comment1.save()
comment3.like()
comment3.like()
comment3.like()
comment3.like()
comment3.save()
post1.like()
post1.like()
post1.like()
post1.like()
post1.like()
post1.save()
post2.dislike()
post2.dislike()
post2.save()
post3.like()
post3.save()
author1.update_rating()
author1.save()
author2.update_rating()
author2.save()
best_user = Author.objects.order_by('-rating').first()
print(best_user.name, best_user.rating)
best_post = Post.objects.order_by('-rating').first()
print(best_post.date_birth, best_post.author.user.username, best_post.rating, best_post.article, best_post.prewiev())
all_comment = Comment.objects.filter(post=best_post).values('date_birth', 'user', 'rating', 'text')
print(all_comment)



